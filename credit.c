#include <stdio.h>
#include <cs50.h>

int main(void)
{
    //Promt user for number
    printf("Credit Card Number: ");
    long long n = get_long_long();
    
    int a = (n % 100 - n % 10) / 10 * 2;
    if (a > 9)
    {
        a = ((a % 100 - a % 10) / 10) + (a % 10);
    }

    int b = (n % 10000 - n % 1000) / 1000 * 2;
    if (b > 9)
    {
        b = ((b % 100 - b % 10) / 10) + (b % 10);
    }

    int c = (n % 1000000 - n % 100000) / 100000 * 2;
    if (c > 9)
    {
        c = ((c % 100 - c % 10) / 10) + (c % 10);
    }

    int d = (n % 100000000 - n % 10000000) / 10000000 * 2;
    if (d > 9)
    {
        d = ((d % 100 - d % 10) / 10) + (d % 10);
    }

    int e = (n % 10000000000 - n % 1000000000) / 1000000000 * 2;
    if (e > 9)
    {
        e = ((e % 100 - e % 10) / 10) + (e % 10);
    }

    int f = (n % 1000000000000 - n % 100000000000) / 100000000000 * 2;
    if (f > 9)
    {
        f = ((f % 100 - f % 10) / 10) + (f % 10);
    }

    int g = (n % 100000000000000 - n % 10000000000000) / 10000000000000 * 2;
    if (g > 9)
    {
        g = ((g % 100 - g % 10) / 10) + (g % 10);
    }

    int h = (n % 10000000000000000 - n % 1000000000000000) / 1000000000000000 * 2;
    if (h > 9)
    {
        h = ((h % 100 - h % 10) / 10) + (h % 10);
    }

    int y = a + b + c + d + e + f + g + h;

    int i = (n % 10);
    int j = (n % 1000 - n % 100) / 100;
    int k = (n % 100000 - n % 10000) / 10000;
    int l = (n % 10000000 - n % 1000000) / 1000000;
    int m = (n % 1000000000 - n % 100000000) / 100000000;
    int o = (n % 100000000000 - n % 10000000000) / 10000000000;
    int p = (n % 10000000000000 - n % 1000000000000) / 1000000000000;
    int q = (n % 1000000000000000 - n % 100000000000000) / 100000000000000;

    int z = y + i + j + k + l + m + o + p + q;
    
    if (n > 339999999999999 && n < 350000000000000 && (z % 10 == 0))
    {
        printf("AMEX\n");
    }
    else if (n > 369999999999999 && n < 380000000000000 && (z % 10 == 0))
    {
        printf("AMEX\n");
    }
    else if (n > 5099999999999999 && n < 5600000000000000 && (z % 10 == 0))
    {
        printf("MASTERCARD\n");
    }
    else if (n > 3999999999999 && n < 5000000000000 && (z % 10 == 0))
    {
        printf("VISA\n");
    }
    else if (n > 3999999999999999 && n < 5000000000000000 && (z % 10 == 0))
    {
        printf("VISA\n");
    }
    else
    {
        printf("INVALID\n");
    }
}